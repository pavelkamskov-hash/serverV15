# -
—Ö—Ö
–§–∏–Ω–∞–ª—å–Ω–æ–µ –¢–ó –¥–ª—è –Ω–æ–≤–æ–π —á–∏—Å—Ç–æ–π —Å–±–æ—Ä–∫–∏ üßµ –õ–∏–Ω–∏–∏: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏ –≤–∫–ª—é—á–µ–Ω–∏–µ –ß—Ç–æ –Ω—É–∂–Ω–æ –ö–∞–∫ –±—É–¥–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –í—Å–µ–≥–æ 13 –ª–∏–Ω–∏–π line1 ‚Üí line13 –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–∫–ª—é—á–∞—é—Ç—Å—è –ö–∞–∫ —Ç–æ–ª—å–∫–æ —Å –ª–∏–Ω–∏–∏ —Ö–æ—Ç—å —Ä–∞–∑ –ø—Ä–∏–¥—É—Ç –¥–∞–Ω–Ω—ã–µ –ë–µ–∑ —Ä—É—á–Ω–æ–≥–æ –≤—ã–±–æ—Ä–∞ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ enabledLines[] –Ω–µ —Ç—Ä–µ–±—É—é—Ç—Å—è –ù–µ–∞–∫—Ç–∏–≤–Ω—ã–µ –Ω–µ –∏—Å—á–µ–∑–∞—é—Ç –ü–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –≤—Å–µ–≥–¥–∞ (–≤ —Å—Ç–∞—Ç—É—Å–µ ‚Äú–Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö‚Äù) üîÑ –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö –æ—Ç ESP32 –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –ü–æ–≤–µ–¥–µ–Ω–∏–µ ESP32 —à–ª—ë—Ç lineId, pulses, duration, ts –ï—Å–ª–∏ –Ω–µ—Ç —Å–≤—è–∑–∏ –±—É—Ñ–µ—Ä–∏–∑—É–µ—Ç –∏ —à–ª—ë—Ç –ø—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ –ï—Å–ª–∏ –≤—ã–∫–ª—é—á–∏–ª–∏ —Å—á–∏—Ç–∞–µ—Ç—Å—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ (—á–µ—Ä–µ–∑ –∞–≥–µ–Ω—Ç) 1 –∏–º–ø = 1 —Å–º —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ üß† Agent / –õ–æ–≥–∏–∫–∞ –∞–Ω–∞–ª–∏–∑–∞ –ß—Ç–æ —Å—á–∏—Ç–∞–µ—Ç –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –°–∫–æ—Ä–æ—Å—Ç—å (—Å–º/–º–∏–Ω) (pulses / duration_ms) * 60000 –°–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ –°–∫–æ–ª—å–∑—è—â–µ–µ –æ–∫–Ω–æ (–Ω–∞–ø—Ä. 60 —Å–µ–∫, —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ) –°–æ—Å—Ç–æ—è–Ω–∏—è: RUN / STOP –ø–æ –ø–æ—Ä–æ–≥–∞–º V_START / V_STOP –ó–∞–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–¥ —Å–º–µ–Ω–æ–π delayStart, delayStop (–Ω–∞–ø—Ä–∏–º–µ—Ä, 30 —Å–µ–∫) –ù–µ–æ–±—Ä–∞—Ç–∏–º—ã–µ STOP –µ—Å–ª–∏ –Ω–µ—Ç –ø–∞–∫–µ—Ç–æ–≤ > N —Å–µ–∫—É–Ω–¥ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 60—Å) –ù–µ—Ç ‚Äú–ø—Ä—ã–∂–∫–æ–≤‚Äù –∏ ‚Äú–≥—Ä–µ–±—ë–Ω–∫–∏‚Äù –°–æ—Å—Ç–æ—è–Ω–∏–µ –º–µ–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –¥–ª–∏—Ç–µ–ª—å–Ω–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏ üìä –ì—Ä–∞—Ñ–∏–∫ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (—Å–∫–æ—Ä–æ—Å—Ç–∏) –ß—Ç–æ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Å–∫–æ—Ä–æ—Å—Ç—å (—Å–º/–º–∏–Ω) –ü–æ –∫–∞–∂–¥–æ–π –ª–∏–Ω–∏–∏, —Å–≥–ª–∞–∂–µ–Ω–Ω–∞—è –í—Ä–µ–º–µ–Ω–Ω–∞—è —à–∫–∞–ª–∞: 24—á –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–∏–∫–∏ –∏ —Å–ø–∞–¥—ã –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å—É–¥–∏—Ç—å –æ –∑–∞–≥—Ä—É–∑–∫–µ –ª–∏–Ω–∏–∏ –¢–æ–ª—å–∫–æ —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –±–µ–∑ –Ω–æ–ª–µ–π –∏ –≤—ã–±—Ä–æ—Å–æ–≤ –¶–≤–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è (—Ñ–æ–Ω): RUN / STOP –≤–∏–∑—É–∞–ª—å–Ω–æ —Ä–∞–∑–ª–∏—á–∏–º—ã üìà –ì—Ä–∞—Ñ–∏–∫ –∑–∞ 30 –¥–Ω–µ–π: –û—Å—Ç–∞–Ω–æ–≤–∫–∞ / –†–∞–±–æ—Ç–∞ –ß—Ç–æ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –î–ª—è –∫–∞–∂–¥–æ–π –ª–∏–Ω–∏–∏ –æ—Ç–¥–µ–ª—å–Ω–∞—è –≥–∏—Å—Ç–æ–≥—Ä–∞–º–º–∞ –û—Å–Ω–æ–≤–∞: status_log –ø–∏—à–µ—Ç—Å—è –∫–∞–∂–¥–æ–µ —Å–æ–±—ã—Ç–∏–µ "–ó–∞–ø—É—Å–∫"/"–û—Å—Ç–∞–Ω–æ–≤–∫–∞" –ü—Ä–æ—Å—Ç–æ–π = STOP —Å —É—á—ë—Ç–æ–º –∑–∞–¥–µ—Ä–∂–µ–∫ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –°–≥–ª–∞–∂–µ–Ω—ã –∫–æ—Ä–æ—Ç–∫–∏–µ —Å–∫–∞—á–∫–∏ < 60 —Å–µ–∫ ‚Äî –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è –ú–æ–∂–Ω–æ –Ω–∞–≤–µ—Å—Ç–∏ ‚Äî —É–≤–∏–¥–µ—Ç—å –≤—Ä–µ–º—è –ü–æ–¥—Å–∫–∞–∑–∫–∞ –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ üìä –°–≤–æ–¥–Ω—ã–π –æ—Ç—á—ë—Ç –ø–æ 13 –ª–∏–Ω–∏—è–º (Excel) –ß—Ç–æ –≤ –æ—Ç—á—ë—Ç–µ –ö–∞–∫ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –û—Ç—á—ë—Ç –ø–æ –∫–∞–∂–¥–æ–π –ª–∏–Ω–∏–∏ –Ω–∞ –≤–∫–ª–∞–¥–∫–µ –†–∞–±–æ—Ç–∞ / –ü—Ä–æ—Å—Ç–æ–π / –°–æ–±—ã—Ç–∏—è –ì–ª–∞–≤–Ω–∞—è –≤–∫–ª–∞–¥–∫–∞ ‚Äú–°–≤–æ–¥–∫–∞ 30 –¥–Ω–µ–π‚Äù –°—É–º–º–∞ —á–∞—Å–æ–≤ —Ä–∞–±–æ—Ç—ã –∏ –ø—Ä–æ—Å—Ç–æ–µ–≤ –í—Å–µ –¥–∞–Ω–Ω—ã–µ —Å–≥–ª–∞–∂–µ–Ω–Ω—ã–µ –¢–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ –∞–≥–µ–Ω—Ç–∞, –±–µ–∑ ‚Äú—Å—ã—Ä—ã—Ö‚Äù –û—Ç–∫–ª—é—á—ë–Ω–Ω—ã–µ / –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–µ ‚Äî –≤–∫–ª—é—á–µ–Ω—ã –°—Ç–∞—Ç—É—Å ‚Äú0 —á —Ä–∞–±–æ—Ç—ã‚Äù –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è /report –∏ /report_clean üßë‚Äçüíª –§—Ä–æ–Ω—Ç–µ–Ω–¥ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –ü–æ–≤–µ–¥–µ–Ω–∏–µ –õ–µ–≤—ã–π —Å—Ç–æ–ª–±–µ—Ü 13 –ª–∏–Ω–∏–π, —Å—Ç–∞—Ç—É—Å, —Å–∫–æ—Ä–æ—Å—Ç—å –ì—Ä–∞—Ñ–∏–∫ —Å–∫–æ—Ä–æ—Å—Ç–∏ –†–µ–∞–ª—å–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ì—Ä–∞—Ñ–∏–∫ 30–¥ –ü—Ä–æ—Å—Ç–æ–π / —Ä–∞–±–æ—Ç–∞ –ø–æ –¥–Ω—è–º –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –í –≤–∏–¥–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ (–Ω–µ –∏–∑–º–µ–Ω—è—é—Ç—Å—è –≤—Ä—É—á–Ω—É—é) üîß –û–±—â–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã üí° –õ–æ–≥–∏–∫–∞ –ø–µ—Ä–µ–ø–∏—Å–∞–Ω–∞ —Å –Ω—É–ª—è, –±–µ–∑ –Ω–∞–∫–ª–∞–¥–æ–∫ –∏ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏–π üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –∫–∞–∫ –≤ –æ—Ä–∏–≥–∏–Ω–∞–ª–µ: public/, server.js, smartAgent.js, config.js, docker-compose.yml üß† –ê–≥–µ–Ω—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ, —Ç–æ—á–Ω–æ, —Å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ üéõ –í—Å—ë –º–æ–∂–Ω–æ –º–µ–Ω—è—Ç—å —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å ‚Äî –±–µ–∑ –∫–æ–¥–∞ –∏ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –¥–æ—Å—Ç—É–ø –ß—Ç–æ –î–µ—Ç–∞–ª–∏ üîë –ì–ª–∞–≤–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ö–∞–∫ —É —Ç–µ–±—è: –ª–æ–≥–∏–Ω/–ø–∞—Ä–æ–ª—å —á–µ—Ä–µ–∑ /login üîí –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∑–∞—â–∏—â–µ–Ω—ã –ü–∞—Ä–æ–ª—å: 19910509 üåê –°–∞–π—Ç –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω –≤ —Å–µ—Ç–∏ –†–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –¥–æ—Å—Ç—É–ø–∞ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç üîÅ –î–æ—Å—Ç—É–ø –ø–æ IP:PORT http://192.168.1.245:3000 –∏–ª–∏ localhost:3000 üß† –õ–æ–≥–∏–∫–∞ –∞–≥–µ–Ω—Ç–∞ (smartAgent.js) –ß—Ç–æ —Å—á–∏—Ç–∞–µ—Ç –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç üìè –°–∫–æ—Ä–æ—Å—Ç—å (—Å–º/–º–∏–Ω) (pulses / duration_ms) * 60000 ‚è±Ô∏è –£—Å—Ä–µ–¥–Ω–µ–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏ –ü–æ —Å–∫–æ–ª—å–∑—è—â–µ–º—É –æ–∫–Ω—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, 60 —Å–µ–∫) üö¶ –†–∞–±–æ—Ç–∞ / –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –ó–∞–≤–∏—Å–∏—Ç –æ—Ç –ø–æ—Ä–æ–≥–æ–≤ V_START, V_STOP üßò –ó–∞–¥–µ—Ä–∂–∫–∞ —Ñ–∏–∫—Å–∞—Ü–∏–∏ delayStart, delayStop (–≤ —Å–µ–∫—É–Ω–¥–∞—Ö) üß† –•—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π SQLite —Ç–∞–±–ª–∏—Ü–∞ status_log, pulses, lines üìà –ì—Ä–∞—Ñ–∏–∫–∏ –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –≠–ª–µ–º–µ–Ω—Ç –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç üìä –ì—Ä–∞—Ñ–∏–∫ 24 —á–∞—Å–∞ –ü–æ —É—Å—Ä–µ–¥–Ω—ë–Ω–Ω–æ–π —Å–∫–æ—Ä–æ—Å—Ç–∏, –≥–ª–∞–¥–∫–æ üìâ –ü—Ä–æ—Å—Ç–æ–π / —Ä–∞–±–æ—Ç–∞ 30 –¥–Ω–µ–π –ò–∑ –ª–æ–≥–æ–≤ —Å–æ—Å—Ç–æ—è–Ω–∏–π üé® –¶–≤–µ—Ç–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è –í–∫–ª/–≤—ã–∫–ª, —Å—Ç–∞—Ç—É—Å, —Å–∫–æ—Ä–æ—Å—Ç—å üîÅ –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –±–µ–∑ —Å–∫–∞—á–∫–æ–≤ –∏ ‚Äú–≥—Ä–µ–±—ë–Ω–∫–∏‚Äù üõ†Ô∏è –§—Ä–æ–Ω—Ç–µ–Ω–¥ (–≤ public/) –§–∞–π–ª –ò–∑–º–µ–Ω–µ–Ω–∏—è index.html –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ ‚Äú–ù–∞—Å—Ç—Ä–æ–π–∫–∏‚Äù charts.html –ì—Ä–∞—Ñ–∏–∫–∏ –±–µ–∑ —Å–∫–∞—á–∫–æ–≤, –ø–ª–∞–≤–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è settings.html –ü—Ä–æ—Å—Ç–æ–µ –º–µ–Ω—é –Ω–∞—Å—Ç—Ä–æ–µ–∫ (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ) login.html –ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π granulation.html –û—Å—Ç–∞–ª—Å—è –∫–∞–∫ –∑–∞–≥–ª—É—à–∫–∞ ‚öôÔ∏è –ú–µ–Ω—é –Ω–∞—Å—Ç—Ä–æ–µ–∫ (/settings) –ü–∞—Ä–∞–º–µ—Ç—Ä –ß—Ç–æ –¥–µ–ª–∞–µ—Ç windowSec –û–∫–Ω–æ —É—Å—Ä–µ–¥–Ω–µ–Ω–∏—è, —Å–µ–∫ (–Ω–∞–ø—Ä. 60) V_START –ü–æ—Ä–æ–≥ –∑–∞–ø—É—Å–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 0.5 —Å–º/–º–∏–Ω) V_STOP –ü–æ—Ä–æ–≥ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 0.3 —Å–º/–º–∏–Ω) delayStart –ó–∞–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–¥ —Ñ–∏–∫—Å–∞—Ü–∏–µ–π ‚Äú—Ä–∞–±–æ—Ç–∞‚Äù (—Å–µ–∫) delayStop –ó–∞–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–¥ —Ñ–∏–∫—Å–∞—Ü–∏–µ–π ‚Äú–æ—Å—Ç–∞–Ω–æ–≤–∫–∞‚Äù (—Å–µ–∫) graphHours –ì–ª—É–±–∏–Ω–∞ –≥—Ä–∞—Ñ–∏–∫–∞ (24 –∏–ª–∏ 48 —á–∞—Å–æ–≤) enabledLines[] –ö–∞–∫–∏–µ –ª–∏–Ω–∏–∏ –≤–∫–ª—é—á–µ–Ω—ã lineNames –ù–∞–∑–≤–∞–Ω–∏—è –ª–∏–Ω–∏–π (–¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è) üìÅ –í—Å—ë —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ config.json, –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ –ª–µ—Ç—É. ü§ñ Arduino / ESP32 –ß—Ç–æ –¥–µ–ª–∞–µ—Ç –ö–∞–∫ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –°—á–∏—Ç–∞–µ—Ç –∏–º–ø—É–ª—å—Å—ã (1 –∏–º–ø = 1 —Å–º) –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫ –•—Ä–∞–Ω–∏—Ç –±—É—Ñ–µ—Ä –ø—Ä–∏ –æ–±—Ä—ã–≤–µ Wi-Fi –¥–∞ –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç: lineId, pulses, duration, ts –ü—Ä–∏–º–µ—Ä JSON: { "lineId": "line10", "pulses": 25, "duration": 10000, "ts": 1692922200000 } üì§ API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –≠–Ω–¥–ø–æ–∏–Ω—Ç –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ POST /data –ü—Ä–∏—ë–º –¥–∞–Ω–Ω—ã—Ö –æ—Ç ESP32 GET /status –°—Ç–∞—Ç—É—Å –≤—Å–µ—Ö –ª–∏–Ω–∏–π (RUN/STOP, —Å–∫–æ—Ä–æ—Å—Ç—å) GET /chartdata/:id –ì—Ä–∞—Ñ–∏–∫ 24—á + —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ 30–¥ GET /report Excel –æ—Ç—á—ë—Ç –ø–æ —Å–æ–±—ã—Ç–∏—è–º GET /report_clean –£–ø—Ä–æ—â—ë–Ω–Ω–∞—è —Å–≤–æ–¥–∫–∞ –ø–æ –¥–Ω—è–º GET /settings –°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ (c –ø–∞—Ä–æ–ª–µ–º) POST /settings/save –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ üê≥ Docker –û–¥–∏–Ω docker-compose.yml, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–ø—É—Å–∫–∞–µ—Ç: Node.js backend SQLite –ë–î –°–µ—Ä–≤–µ—Ä —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤ (Express) –í—Å—ë —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π:

## Timezone
Set the container timezone via TZ (e.g., `TZ=Etc/GMT-4`) to ensure logs and the /time endpoint report the expected GMT-4 time.

—è –Ω–æ–≤–∏—á–æ–∫, –¥–µ–ª–∞—é —ç—Ç–æ –≤ –ø–µ—Ä–≤—ã–µ, —Å–µ—Ä–≤–µ—Ä –±—É–¥–µ—Ç —Ä–∞–∑–º–µ—â–µ–Ω –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ, –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ Windows –Ω–æ –ø—Ä–æ–±–Ω—É—é —Å–±–æ—Ä–∫—É —è –∑–∞–ø—É—Å–∫–∞—é —á–µ—Ä–µ–∑  Docker wls 2. –°–µ—Ä–≤–µ—Ä –∏ —Å–∞–π—Ç –Ω—É–∂–Ω—ã –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å–∫–æ—Ä–æ—Å—Ç–∏ –ª–∏–Ω–∏–π –Ω–∞ —Å—Ç–∞–Ω–∫–µ.
–ù–∏–∂–µ ‚Äî —Ü–µ–ª—å —Å–∏—Å—Ç–µ–º—ã, –µ—ë –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –ø–æ–ª–Ω—ã–π —Ä–∞–∑–±–æ—Ä –ª–æ–≥–∏–∫–∏ ¬´–æ—Ç –¥–∞—Ç—á–∏–∫–∞ –¥–æ –≥—Ä–∞—Ñ–∏–∫–∞ –∏ –æ—Ç—á—ë—Ç–∞¬ª. –ü–∏—à—É –ø—Ä–æ —Ç–µ–∫—É—â—É—é —á–∏—Å—Ç—É—é —Å–±–æ—Ä–∫—É —Å –Ω–∞—à–∏–º–∏ –¥–æ–≥–æ–≤–æ—Ä—ë–Ω–Ω—ã–º–∏ –¥–æ—Ä–∞–±–æ—Ç–∫–∞–º–∏ (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞—Å—á—ë—Ç–æ–≤).

–ó–∞—á–µ–º —ç—Ç–∞ —Å–±–æ—Ä–∫–∞

–°–∏—Å—Ç–µ–º–∞ –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç 13 –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ª–∏–Ω–∏–π –∏ –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞:

–ø—Ä–∏—ë–º —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–∏ –æ—Ç ESP32 (–∏–º–ø—É–ª—å—Å—ã ‚Üí –ø—Ä–æ–π–¥–µ–Ω–Ω—ã–µ —Å–∞–Ω—Ç–∏–º–µ—Ç—Ä—ã);

—Ä–∞—Å—á—ë—Ç —Å–∫–æ—Ä–æ—Å—Ç–∏ (—Å–º/–º–∏–Ω) –∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ª–∏–Ω–∏–∏ (RUN/STOP) —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π —à—É–º–æ–≤;

–≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—é: —Å–∫–æ—Ä–æ—Å—Ç—å –∑–∞ 24‚Äì48 —á–∞—Å–æ–≤, –∏ ¬´–†–∞–±–æ—Ç–∞/–ü—Ä–æ—Å—Ç–æ–π¬ª –ø–æ –¥–Ω—è–º –∑–∞ 30 —Å—É—Ç–æ–∫;

–≥–µ–Ω–µ—Ä–∞—Ü–∏—é Excel-–æ—Ç—á—ë—Ç–æ–≤: —Å–≤–æ–¥–∫–∞ –ø–æ –≤—Å–µ–º –ª–∏–Ω–∏—è–º + –ø–æ–º–∏–Ω—É—Ç–Ω–æ-—Å–æ–±—ã—Ç–∏–π–Ω—ã–µ –ª–µ–Ω—Ç—ã –ø–æ –∫–∞–∂–¥–æ–π –ª–∏–Ω–∏–∏;

–±–µ–∑–æ–ø–∞—Å–Ω—ã–π –¥–æ—Å—Ç—É–ø: –ª–æ–≥–∏–Ω –Ω–∞ —Å–∞–π—Ç –∏ –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø–∞—Ä–æ–ª—å –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –Ω–∞—Å—Ç—Ä–æ–µ–∫.
–û–±—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

ESP32 ‚Üí —Å–µ—Ä–≤–µ—Ä: –∫–∞–∂–¥—ã–µ N —Å–µ–∫—É–Ω–¥ ESP32 —à–ª—ë—Ç –ø–∞–∫–µ—Ç JSON:
{ "lineId": "line10", "pulses": 25, "duration": 10000, "ts": 1692922200000 }
1 –∏–º–ø—É–ª—å—Å = 1 —Å–º (—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–æ).

–ü—Ä–∏ –æ–±—Ä—ã–≤–µ Wi-Fi ESP32 –±—É—Ñ–µ—Ä–∏–∑—É–µ—Ç –∏ –¥–æ–≥—Ä—É–∂–∞–µ—Ç –ø—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏.

Backend (Node.js + Express):

–º–∞—Ä—à—Ä—É—Ç POST /data –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ç–µ–ª–µ–º–µ—Ç—Ä–∏—é –∏ –ø–∏—à–µ—Ç –≤ SQLite;

–ø–µ—Ä–µ–¥–∞—ë—Ç —Ç–æ—á–∫—É –≤ –∞–≥–µ–Ω—Ç –∞–Ω–∞–ª–∏–∑–∞ (smartAgent), –∫–æ—Ç–æ—Ä—ã–π —Å—á–∏—Ç–∞–µ—Ç —Å–∫–æ—Ä–æ—Å—Ç—å/—Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ –≤–µ–¥—ë—Ç –ª–æ–≥–∏;

–≤—ã–¥–∞—ë—Ç –¥–∞–Ω–Ω—ã–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—É (/status, /chartdata/:lineId) –∏ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –æ—Ç—á—ë—Ç—ã (/report, /report_clean).

SQLite –ë–î (–≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è, –±–µ–∑ –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π).

Frontend (static –≤ /public):

–ª–µ–≤–∞—è –ø–∞–Ω–µ–ª—å: 13 –ª–∏–Ω–∏–π (–≤—Å–µ–≥–¥–∞), —Ç–µ–∫—É—â–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –∏ —Å—Ç–∞—Ç—É—Å;

–≤–µ—Ä—Ö–Ω–∏–π –≥—Ä–∞—Ñ–∏–∫: —Å–≥–ª–∞–∂–µ–Ω–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –∑–∞ 24/48 —á–∞—Å–æ–≤;

–Ω–∏–∂–Ω–∏–π –≥—Ä–∞—Ñ–∏–∫: –†–∞–±–æ—Ç–∞/–ü—Ä–æ—Å—Ç–æ–π –ø–æ –¥–Ω—è–º –∑–∞ 30 —Å—É—Ç–æ–∫ —Å –ø–æ–¥—Å–∫–∞–∑–∫–∞–º–∏ ¬´–æ—Å—Ç–∞–Ω–æ–≤–∫–∞/–∑–∞–ø—É—Å–∫/–¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å¬ª;

–∫–Ω–æ–ø–∫–∞ ¬´–°–∫–∞—á–∞—Ç—å –æ—Ç—á—ë—Ç –∑–∞ 30 –¥–Ω–µ–π¬ª.

–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:

—Å–∞–π—Ç –∑–∞—â–∏—â—ë–Ω –ª–æ–≥–∏–Ω–æ–º: zavod / H0lzH0f2025 (–ø–∞—Ä–æ–ª—å —Ö—Ä–∞–Ω–∏—Ç—Å—è –∫–∞–∫ bcrypt-—Ö—ç—à);

—Å—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –∑–∞—â–∏—â–µ–Ω–∞ –ø–∞—Ä–æ–ª–µ–º 19910509;

–æ—Ç–∫—Ä—ã—Ç—ã –ø—É–±–ª–∏—á–Ω–æ —Ç–æ–ª—å–∫–æ /data, /healthz, /time, /settings/auth, /login, /logout, /favicon.ico.

–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (SQLite)

–°–æ–∑–¥–∞—é—Ç—Å—è —Ç–∞–±–ª–∏—Ü—ã:

status(lineId, isRunning, lastPulseTime, lastPacketTime) ‚Äî —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ª–∏–Ω–∏–∏;

status_log(id, lineId, timestamp, isRunning) ‚Äî —Å–æ–±—ã—Ç–∏—è ¬´–ó–∞–ø—É—Å–∫/–û—Å—Ç–∞–Ω–æ–≤–∫–∞¬ª (—Å —É—á—ë—Ç–æ–º –∑–∞–¥–µ—Ä–∂–µ–∫ –∏ –≥–∏—Å—Ç–µ—Ä–µ–∑–∏—Å–∞);

pulses(id, lineId, pulses, duration, timestamp) ‚Äî —Å—ã—Ä–∞—è —Ç–µ–ª–µ–º–µ—Ç—Ä–∏—è;

minute_stats(lineId, ts, speed) ‚Äî –ø–æ–º–∏–Ω—É—Ç–Ω—ã–µ —É—Å—Ä–µ–¥–Ω—ë–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è —Å–∫–æ—Ä–æ—Å—Ç–∏ –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–æ–≤.

–ê–≥–µ–Ω—Ç –∞–Ω–∞–ª–∏–∑–∞ (smartAgent.js)

–í—Ö–æ–¥: –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–∞–∫–µ—Ç–æ–≤ (pulses, duration_ms, ts) –ø–æ –∫–∞–∂–¥–æ–π –ª–∏–Ω–∏–∏.

–†–∞—Å—á—ë—Ç—ã:

–°–∫–æ—Ä–æ—Å—Ç—å –ø–∞–∫–µ—Ç–∞:
speed_cm_per_min = (pulses / duration_ms) * 60000

–°–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ (—Å–∫–æ–ª—å–∑—è—â–µ–µ –æ–∫–Ω–æ):
—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –æ–∫–Ω–æ windowSec (–Ω–∞–ø—Ä–∏–º–µ—Ä, 60 —Å). –§–∞–∫—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞–µ—Ç—Å—è –≤–∑–≤–µ—à–µ–Ω–Ω–æ–µ —Å—Ä–µ–¥–Ω–µ–µ –ø–æ —Å—É–º–º–µ –∏–º–ø—É–ª—å—Å–æ–≤/–¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π –∑–∞ –æ–∫–Ω–æ.

–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ RUN/STOP (–≥–∏—Å—Ç–µ—Ä–µ–∑–∏—Å):

–¥–≤–∞ –ø–æ—Ä–æ–≥–∞: V_START (–≤—ã—à–µ ‚Äî —Å—á–∏—Ç–∞–µ–º ¬´—Ä–∞–±–æ—Ç–∞–µ—Ç¬ª), V_STOP (–Ω–∏–∂–µ ‚Äî ¬´–æ—Å—Ç–∞–Ω–æ–≤–∫–∞¬ª);

–∑–∞–¥–µ—Ä–∂–∫–∏ —Ñ–∏–∫—Å–∞—Ü–∏–∏ delayStart / delayStop (–Ω–∞–ø—Ä–∏–º–µ—Ä, 30 —Å): —Å–æ—Å—Ç–æ—è–Ω–∏–µ –º–µ–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —Å–∫–æ—Ä–æ—Å—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω–æ –ø–æ —Ç—É —Å—Ç–æ—Ä–æ–Ω—É –ø–æ—Ä–æ–≥–∞ –≤–µ—Å—å –∏–Ω—Ç–µ—Ä–≤–∞–ª –∑–∞–¥–µ—Ä–∂–∫–∏;

–∏—Ç–æ–≥: –Ω–µ—Ç ¬´–ø–∏–ª—ã¬ª/¬´–≥—Ä–µ–±—ë–Ω–∫–∏¬ª, –∫–æ—Ä–æ—Ç–∫–∏–µ –≤—Å–ø–ª–µ—Å–∫–∏ –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è.

Watchdog (–Ω–µ—Ç –ø–∞–∫–µ—Ç–æ–≤ ‚Üí STOP):

—Å–µ—Ä–≤–µ—Ä–Ω—ã–π —Ç–∞–π–º–µ—Ä –ø—Ä–æ–≤–µ—Ä—è–µ—Ç lastPacketTime; –µ—Å–ª–∏ –ø–∞—É–∑–∞ –¥–ª–∏–Ω–Ω–µ–µ offlineTimeout (–Ω–∞–ø—Ä–∏–º–µ—Ä, 60 —Å), –∞–≥–µ–Ω—Ç –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç STOP –∏ –ø–∏—à–µ—Ç —Å–æ–±—ã—Ç–∏–µ –≤ status_log.

–ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–æ–≤:

–ø–æ–º–∏–Ω—É—Ç–Ω–æ —É—Å—Ä–µ–¥–Ω—è–µ—Ç —Å–∫–æ—Ä–æ—Å—Ç—å (–∏–∑ —Å–≥–ª–∞–∂–µ–Ω–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–∞) –∏ –ø–∏—à–µ—Ç –≤ minute_stats;

–∂—É—Ä–Ω–∞–ª —Å–æ–±—ã—Ç–∏–π status_log –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è 30-–¥–Ω–µ–≤–Ω–æ–π –¥–∏–∞–≥—Ä–∞–º–º—ã —Ä–∞–±–æ—Ç—ã/–ø—Ä–æ—Å—Ç–æ—è –∏ –¥–ª—è –æ—Ç—á—ë—Ç–æ–≤.

–í–∞–∂–Ω–æ: –º—ã –Ω–µ –º–µ–Ω—è–µ–º –Ω–∏ —Ñ–æ—Ä–º—É–ª—ã, –Ω–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–∞—Å—á—ë—Ç–æ–≤. –í—Å—ë —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Ä–æ–≥–∞–º–∏/–æ–∫–Ω–æ–º/–∑–∞–¥–µ—Ä–∂–∫–∞–º–∏ ‚Äî —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–∏ –¥–æ—Å—Ç—É–ø–Ω–æ –¥–ª—è —á—Ç–µ–Ω–∏—è/–ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –≤ UI).

–ú–∞—Ä—à—Ä—É—Ç—ã (API)

POST /data ‚Äî –ø—Ä–∏—ë–º —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–∏ –æ—Ç ESP32. –ù–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç ts (—Å–µ–∫/–º—Å) ‚Üí —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ pulses ‚Üí –¥–∞—ë—Ç –∞–≥–µ–Ω—Ç—É ‚Üí –ø—Ä–∏ —Å–º–µ–Ω–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–∏—à–µ—Ç –≤ status_log ‚Üí –æ–±–Ω–æ–≤–ª—è–µ—Ç status.

GET /status ‚Äî —Å–ø–∏—Å–æ–∫ 13 –ª–∏–Ω–∏–π –≤—Å–µ–≥–¥–∞ (–¥–∞–∂–µ –±–µ–∑ –¥–∞–Ω–Ω—ã—Ö): –∏–º—è, —Å—Ç–∞—Ç—É—Å (RUN/STOP/–Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö), —Ç–µ–∫—É—â–∞—è —Å–≥–ª–∞–∂–µ–Ω–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å (–µ—Å–ª–∏ –µ—Å—Ç—å), –ø—Ä–æ–¥—É–∫—Ç (–µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö).

GET /chartdata/:lineId ‚Äî –¥–∞–Ω–Ω—ã–µ –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–æ–≤:

–≤–µ—Ä—Ö–Ω–∏–π –≥—Ä–∞—Ñ–∏–∫: –º–∞—Å—Å–∏–≤ labels (–º–∏–Ω—É—Ç–Ω—ã–µ –º–µ—Ç–∫–∏ –∑–∞ 24/48—á) —É–∂–µ –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω –≤ –ª–æ–∫–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ YYYY-MM-DD HH:mm (UTC+04:00), –∏ data (—Å–≥–ª–∞–∂–µ–Ω–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å),

–Ω–∏–∂–Ω–∏–π –≥—Ä–∞—Ñ–∏–∫: –ø–æ –∫–∞–∂–¥–æ–º—É –∏–∑ 30 –¥–Ω–µ–π ‚Äî —á–∞—Å—ã ¬´–†–∞–±–æ—Ç–∞/–ü—Ä–æ—Å—Ç–æ–π¬ª, –ø–ª—é—Å events (—Å–µ–≥–º–µ–Ω—Ç—ã –¥–Ω—è) –¥–ª—è –ø–æ–¥—Å–∫–∞–∑–æ–∫:
{ "start": 1692873600, "end": 1692878700, "state": 0, "startStr": "12:43", "endStr": "13:58", "durMin": 75 }
—Å–µ–≥–º–µ–Ω—Ç—ã < 60 —Å —Å—Ö–ª–æ–ø—ã–≤–∞—é—Ç—Å—è –∫ —Å–æ—Å–µ–¥–Ω–µ–º—É —Å–æ—Å—Ç–æ—è–Ω–∏—é (–∫–∞–∫ –≤ –æ—Ç—á—ë—Ç–∞—Ö).

GET /report ‚Äî Excel –∑–∞ 30 –¥–Ω–µ–π:

–õ–∏—Å—Ç ¬´–°–≤–æ–¥–∫–∞ 30 –¥–Ω–µ–π¬ª: –ø–æ –∫–∞–∂–¥–æ–π –ª–∏–Ω–∏–∏ ‚Äî —á–∞—Å—ã ¬´–†–∞–±–æ—Ç–∞/–ü—Ä–æ—Å—Ç–æ–π¬ª –∏ %.

13 –ª–∏—Å—Ç–æ–≤ –ø–æ –ª–∏–Ω–∏—è–º: —Ç–µ–∫—Å—Ç–æ–≤–∞—è –ª–µ–Ω—Ç–∞ —Å–æ–±—ã—Ç–∏–π —Ç–∏–ø–∞
2025-08-21 –∑–∞–ø—É—Å–∫ 12:43 (–ò–∑–¥–µ–ª–∏–µ)
2025-08-21 —Ä–∞–±–æ—Ç–∞ 24 —á–∞—Å–∞ (–ò–∑–¥–µ–ª–∏–µ)
2025-08-22 –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ 12:43 (–ò–∑–¥–µ–ª–∏–µ)
2025-08-22 –ø—Ä–æ—Å—Ç–æ–π 1 —á–∞—Å (–ò–∑–¥–µ–ª–∏–µ)
(–Ω–∞–∑–≤–∞–Ω–∏–µ –∏–∑–¥–µ–ª–∏—è ‚Äî –∏–∑ settings.products[lineId], –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ö–µ–º—ã –ë–î).

GET /report_clean ‚Äî —É–ø—Ä–æ—â—ë–Ω–Ω–∞—è —Å–≤–æ–¥–∫–∞ (—á–∞—Å—ã –ø–æ –¥–Ω—è–º).

GET /settings + POST /settings/save ‚Äî –ø—Ä–æ—Å–º–æ—Ç—Ä/—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ (–∑–∞—â–∏—â–µ–Ω—ã –ø–∞—Ä–æ–ª–µ–º 19910509).

GET /login, POST /login, GET /logout ‚Äî –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –Ω–∞ —Å–∞–π—Ç (—Å–µ—Å—Å–∏–∏, bcrypt).

–í—Ä–µ–º—è –∏ —Ç–∞–π–∑–æ–Ω–∞

–°–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Ç–∞–π–∑–æ–Ω–µ UTC+04:00 (—á–µ—Ä–µ–∑ process.env.TZ = 'Etc/GMT-4' –∏/–∏–ª–∏ —è–≤–Ω—ã–π —Å–¥–≤–∏–≥ +4 —á–∞—Å–∞ –≤ —Ñ–æ—Ä–º–∞—Ç—Ç–µ—Ä–∞—Ö).

–í—Å–µ –ø–æ–¥–ø–∏—Å–∏ –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–æ–≤ –∏ –æ—Ç—á—ë—Ç–æ–≤ —Ñ–æ—Ä–º–∏—Ä—É—é—Ç—Å—è –≤ —ç—Ç–æ–º —á–∞—Å–æ–≤–æ–º –ø–æ—è—Å–µ:

–≤–µ—Ä—Ö–Ω–∏–π –≥—Ä–∞—Ñ–∏–∫ —Å–∫–æ—Ä–æ—Å—Ç–∏: YYYY-MM-DD HH:mm;

–Ω–∏–∂–Ω–∏–π –≥—Ä–∞—Ñ–∏–∫: –≤—Å–ø–ª—ã–≤–∞—é—â–∏–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏ ¬´–û—Å—Ç–∞–Ω–æ–≤–∫–∞/–ó–∞–ø—É—Å–∫/‚Ä¶¬ª –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç HH:mm –∏ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å.

–§—Ä–æ–Ω—Ç–µ–Ω–¥ (–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å)

–õ–µ–≤–∞—è –ø–∞–Ω–µ–ª—å ‚Äî 13 –ª–∏–Ω–∏–π –≤—Å–µ–≥–¥–∞:

–∏–º—è (–∏–∑ config.json/lineNames), —Å—Ç–∞—Ç—É—Å, —Ç–µ–∫—É—â–∞—è —Å–≥–ª–∞–∂–µ–Ω–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å;

¬´–Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö¬ª ‚Äî –µ—Å–ª–∏ –µ—â—ë –Ω–µ –ø—Ä–∏—Ö–æ–¥–∏–ª–∏ –ø–∞–∫–µ—Ç—ã.

–í–µ—Ä—Ö–Ω–∏–π –≥—Ä–∞—Ñ–∏–∫ ‚Äî —Ä–µ–∞–ª—å–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (—Å–º/–º–∏–Ω) –∑–∞ 24/48 —á–∞—Å–æ–≤:

–º–µ—Ç–∫–∏ –æ—Å–∏ X ‚Äî —á–∞—Å—ã (–ø–æ–Ω—è—Ç–Ω–æ ¬´–∫–æ–≥–¥–∞¬ª –±—ã–ª–∞ –ø—Ä–æ—Å–∞–¥–∫–∞/–ø–∏–∫);

–¥–∞–Ω–Ω—ã–µ ‚Äî —Å–≥–ª–∞–∂–µ–Ω–Ω—ã–µ (–Ω–∏–∫–∞–∫–∏—Ö ¬´—Å—Ç—É–ø–µ–Ω–µ–∫¬ª).

–ù–∏–∂–Ω–∏–π –≥—Ä–∞—Ñ–∏–∫ ‚Äî ¬´–†–∞–±–æ—Ç–∞/–ü—Ä–æ—Å—Ç–æ–π¬ª –∑–∞ 30 –¥–Ω–µ–π:

—Å—Ç–µ–∫-–¥–∏–∞–≥—Ä–∞–º–º–∞ –ø–æ –¥–Ω—è–º;

–ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ ‚Äî –≤—Ä–µ–º—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏, –ø—É—Å–∫–∞ –∏ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫–∞–∂–¥–æ–≥–æ —Å–µ–≥–º–µ–Ω—Ç–∞ –¥–Ω—è (–ø–æ—Å–ª–µ —Å—Ö–ª–æ–ø—ã–≤–∞–Ω–∏—è –∫–æ—Ä–æ—Ç–∫–∏—Ö).

–ö–Ω–æ–ø–∫–∞ ¬´–°–∫–∞—á–∞—Ç—å –æ—Ç—á—ë—Ç –∑–∞ 30 –¥–Ω–µ–π¬ª ‚Äî –∑–∞–ø—É—Å–∫–∞–µ—Ç /report.

–°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ (/settings) ‚Äî —Ç–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä/–ø—Ä–∞–≤–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏–∑ –∫–æ–¥–∞).

–ó–∞–º–µ—á–∞–Ω–∏–µ: —á—Ç–æ–±—ã UI —Ä–∞–±–æ—Ç–∞–ª –±–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞, –≤–Ω–µ—à–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ (Tailwind/Chart.js) –∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ –ª–æ–∫–∞–ª—å–Ω–æ –ø–æ–ª–æ–∂–∏—Ç—å –≤ public/ (—Å–µ–π—á–∞—Å –æ–±—ã—á–Ω–æ –ø–æ–¥–≥—Ä—É–∂–∞—é—Ç—Å—è —Å CDN).

–ù–∞—Å—Ç—Ä–æ–π–∫–∏

–•—Ä–∞–Ω—è—Ç—Å—è –≤ config.json (–∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è ¬´–Ω–∞ –ª–µ—Ç—É¬ª, –±–µ–∑ –ø—Ä–∞–≤–∫–∏ –∫–æ–¥–∞):

windowSec, V_START, V_STOP, delayStart, delayStop, graphHours (24/48), offlineTimeout;

enabledLines[] (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è UI; –ª–∏–Ω–∏–∏ –≤—Å—ë —Ä–∞–≤–Ω–æ –≤–∏–¥–Ω—ã –≤—Å–µ 13);

lineNames (–ø–æ–¥–ø–∏—Å–∏ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ), products (–Ω–∞–∑–≤–∞–Ω–∏—è –∏–∑–¥–µ–ª–∏—è –Ω–∞ –ª–∏–Ω–∏—è—Ö ‚Äî –∏–¥—É—Ç –≤ –æ—Ç—á—ë—Ç/–ø–æ–¥—Å–∫–∞–∑–∫–∏);

–¥–æ—Å—Ç—É–ø –∫ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—é ‚Äî —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ /settings/auth —Å –ø–∞—Ä–æ–ª–µ–º 19910509.

Docker

–û–¥–∏–Ω docker-compose.yml –∑–∞–ø—É—Å–∫–∞–µ—Ç:

Node.js backend (Express),

SQLite (–ª–æ–∫–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª),

—Å—Ç–∞—Ç–∏–∫—É /public.

–°–∞–π—Ç –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω –≤ —Å–µ—Ç–∏, –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ http://<IP>:3000. –ò–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç (–∫—Ä–æ–º–µ CDN –±–∏–±–ª–∏–æ—Ç–µ–∫ –≤ UI, –µ—Å–ª–∏ –∏—Ö –Ω–µ –ø–æ–ª–æ–∂–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ).

–ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã –∏ –≥–∞—Ä–∞–Ω—Ç–∏–∏

13 –ª–∏–Ω–∏–π ‚Äî –≤—Å–µ–≥–¥–∞ –Ω–∞ —ç–∫—Ä–∞–Ω–µ (–∞–∫—Ç–∏–≤–∏—Ä—É—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –ø–∞–∫–µ—Ç–µ).

–°–∫–æ—Ä–æ—Å—Ç—å/—Å–æ—Å—Ç–æ—è–Ω–∏—è —Å—á–∏—Ç–∞—é—Ç —Ç–æ–ª—å–∫–æ ¬´—á–∏—Å—Ç—ã–º¬ª –∞–ª–≥–æ—Ä–∏—Ç–º–æ–º –∞–≥–µ–Ω—Ç–∞, –±–µ–∑ –≤—Å—Ç–∞–≤–æ–∫/–ø–æ–¥–ø—Ä–∞–≤–ª–µ–Ω–∏–π.

–û—Ç—á—ë—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ç–µ –∂–µ –ª–æ–≥–∏–∫—É –∏ —Å—Ö–ª–æ–ø—ã–≤–∞–Ω–∏–µ –∫–æ—Ä–æ—Ç–∫–∏—Ö —Å–µ–≥–º–µ–Ω—Ç–æ–≤, —á—Ç–æ –∏ –≥—Ä–∞—Ñ–∏–∫–∏ ‚Äî –≤—Å—ë —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–æ.

–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å: –ª–æ–≥–∏–Ω –Ω–∞ —Å–∞–π—Ç (bcrypt-—Ö—ç—à), –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø–∞—Ä–æ–ª—å –Ω–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, –º–∏–Ω–∏–º—É–º –æ—Ç–∫—Ä—ã—Ç—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤.

## –î–æ–ø–æ–ª–Ω–µ–Ω–∏—è
- –ü—Ä–∏–º–µ—Ä –ø—Ä–æ—à–∏–≤–∫–∏ ESP32 —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω –≤ –∫–∞—Ç–∞–ª–æ–≥–µ `arduino/`.
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Ä–æ–ª–∏ –∏ —Ö—ç—à–∏ –ø–∞—Ä–æ–ª–µ–π –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ `auth/users.json`.
- –ü–æ—è—Å–Ω–µ–Ω–∏—è –∫ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º –≤ `docs/SETTINGS.md`.

